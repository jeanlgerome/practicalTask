create sequence hibernate_sequence start 1 increment 1
create table office (id int8 not null, adress varchar(100) not null, is_active boolean not null, name varchar(50) not null, phone varchar(50), version int8, organization_id int8 not null, primary key (id))
create table organization (id int8 not null, adress varchar(255) not null, full_name varchar(255) not null, inn varchar(255) not null, is_active boolean not null, kpp varchar(255) not null, name varchar(255) not null, phone varchar(255), version int8, primary key (id))
create table usr (id int8 not null, citizenship_code varchar(255), citizenship_name varchar(255), doc_date date, doc_name varchar(255), doc_number varchar(255), first_name varchar(255) not null, is_identified boolean not null, middle_name varchar(255), phone varchar(255), position varchar(255) not null, second_name varchar(255), version int8, office_id int8 not null, primary key (id))
create index IX_office_organization on office (organization_id)
create index IX_office_name on office (name)
create index IX_office_isActive on office (is_active)
alter table if exists office add constraint UX_office_phone unique (phone)
create index IX_organization_name on organization (name)
create index IX_organization_isActive on organization (is_active)
alter table if exists organization add constraint UX_organization_inn unique (inn)
create index IX_usr_office on usr (office_id)
create index IX_usr_firstName on usr (first_name)
create index IX_usr_secondName on usr (second_name)
create index IX_usr_middleName on usr (middle_name)
create index IX_usr_position on usr (position)
create index IX_usr_citizenshipCode on usr (citizenship_code)
alter table if exists usr add constraint UX_usr_docNumber unique (doc_number)
alter table if exists office add constraint FKaa75do6pm855upok2c8g2rhbk foreign key (organization_id) references organization
alter table if exists usr add constraint FK17kfclc8qt8kn3n4hg8hk58nm foreign key (office_id) references office
